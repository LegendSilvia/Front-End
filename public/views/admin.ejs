<!DOCTYPE html>
<html>
<head>
    <title>Books Management</title>
    <link rel="stylesheet" href="../css/style.css">
</head>
<body>
    <a href="/" class="active">Exit</a><a href="/admin" class="active">Order</a><a href="/admin/book" class="active">Book</a><a href="/admin/Entities" class="active">Entities</a>
    <h1>Order Management</h1>
    <div class="display">
        <center>
        <div class="containerR" style="width: 75%; border: 2px solid black;">
          <table>
            <tr><th style="width: 15%; text-align: center;">No.</th><th style="width: 17%;text-align: center;">Order Date</th>
              <th style="text-align: center;">Status</th><th style="text-align: center;">Totals</th><th>Action</th>
              <% for (var i=0; i < order.length; i++) {%>
                  <tr>
                      <td style="text-align: center;"><%= i+1 %></td>
                      <td style="text-align: center;">
                        <% 
                        function formatDate(dateString) {
                          const createdAt = new Date(dateString);
                          const formattedDate = createdAt.toLocaleDateString('en-US', {
                            month: '2-digit',
                            day: '2-digit',
                            year: 'numeric'
                          });
                          return formattedDate;
                        }
                        %>
                        <%= 
                        formatDate(order[i].createdAt) 
                        %></td>
                        <td>
                          <div style="text-align: center; border: 2px solid #1eff00; border-radius: 50px; margin: 15px 50px; padding: 10px 10px; background-color: #e6ffe2;">
                            <%= order[i].status %>
                          </div>
                        </td>                      
                      <td style="text-align: center;"><%= order[i].total %></td>
                      <td style="text-align: center;">
                        <div style="text-align: center; border: 2px solid #30b5cc; border-radius: 50px; margin: 15px 50px; padding: 10px 10px; background-color: #bef5ff;">
                          <a href="/admins/<%= order[i].id %>" style="font-size: 14px;">View Order</a>
                        </div>
                      </td>
                  </tr> 
              <% } %>
          </tr>
          </table>
        </div>
        </center>
    </div>
</body>
<script>
    document.addEventListener('DOMContentLoaded', function() {
        // Get all input fields with the class 'field'
        var inputFields = document.querySelectorAll('.field');

        inputFields.forEach(function(inputField) {
        var initialValue = parseInt(inputField.value);
        if (initialValue < 21) {
            inputField.style.backgroundColor = '#f39090';
        } else if (initialValue < 41) {
            inputField.style.backgroundColor = '#ffff00a3';
        } else {
            inputField.style.backgroundColor = '#54e959a3';
        }
    });
        
        // Iterate over each input field
        inputFields.forEach(function(inputField) {
            // Add input event listener to each input field
            inputField.addEventListener('input', function() {
                var value = parseInt(this.value);
                if (value < 21) {
                    this.style.backgroundColor = '#f39090';
                } else if (value < 41) {
                    this.style.backgroundColor = '#ffff00a3';
                } else {
                    this.style.backgroundColor = '#54e959a3';
                }
            });
        });
    });
    </script>
</head>
</html>